## ğŸ¯ **æœ€ç»ˆå®Œæ•´ç‰ˆæ–¹æ¡ˆï¼šå¼ºåˆ¶ç™»å½•çš„workspace**

### **æ ¸å¿ƒè®¾è®¡åŸåˆ™**
- âœ… **å¼ºåˆ¶è®¤è¯**: workspaceé¡µé¢å¿…é¡»ç™»å½•æ‰èƒ½è®¿é—®
- âœ… **æœ€å°ä¿®æ”¹**: å¤ç”¨ç°æœ‰4ä¸ªè®¤è¯æ¨¡å—ï¼Œæœ€å°‘ä»£ç æ”¹åŠ¨
- âœ… **ç®€å•æ¶æ„**: ä¸è€ƒè™‘åŒ¿åã€è¿ç§»ã€åŒæ­¥ç­‰å¤æ‚åœºæ™¯
---

## ğŸ“ **å®æ–½æ¸…å•**

### **1. åç«¯ä¿®æ”¹ï¼ˆ2ä¸ªæ–‡ä»¶ï¼Œ3è¡Œä»£ç ï¼‰**
#### **1.1 æ·»åŠ å¼ºåˆ¶è®¤è¯ä¾èµ–**
src/server/research_create_api.py
åœ¨Serviceè°ƒç”¨ä¸­æ³¨å…¥user_idï¼Œæ±‚ä»–é€»è¾‘ä¿æŒä¸å˜

src/server/research_stream_api.py
æ³¨å…¥user_idï¼Œæ±‚ä»–é€»è¾‘ä¿æŒä¸å˜

### **2. å‰ç«¯è®¤è¯Hookï¼ˆ1ä¸ªæ–°æ–‡ä»¶ï¼‰**
#### **2.1 åˆ›å»ºè®¤è¯Hook**
web/src/hooks/useAuth.ts
ç”¨å¥½supbaseåŸç”Ÿå†…ç½®èƒ½åŠ›ï¼Œ

æ³¨æ„web/src/lib/supa.tsè¢«éå¸¸å¤šçš„æ–‡ä»¶å¼•ç”¨ä¾èµ–ï¼Œå¦‚æœæœ‰éœ€è¦é€‚é…æœ¬é¡¹ç›®çš„å¿…è¦è°ƒæ•´ï¼ŒåŠ¡å¿…æ³¨æ„æµ‹è¯•å®Œå–„ã€‚

### **3. ç™»å½•ç•Œé¢ç»„ä»¶ï¼ˆ1ä¸ªæ–°æ–‡ä»¶ï¼‰**
#### **3.1 åˆ›å»ºç™»å½•ç•Œé¢**
web/src/components/auth/LoginScreen.tsx
åˆ©ç”¨supabaseåŸç”Ÿå†…ç½®åŠŸèƒ½ï¼Œç¬¦åˆæœ¬é¡¹ç›®è§†è§‰è®¾è®¡è¦ç´ 

### **4. workspaceé¡µé¢é›†æˆï¼ˆ1ä¸ªæ–‡ä»¶ä¿®æ”¹ï¼‰**
#### **4.1 ä¿®æ”¹workspaceé¡µé¢**
web/src/app/workspace/page.tsx
å¢åŠ è®¤è¯æ£€æŸ¥ï¼Œå…¶ä½™é€»è¾‘ä¿æŒå®Œå…¨ä¸å˜

### **5. å…¨å±€ä¾§è¾¹æ ç”¨æˆ·ä¿¡æ¯ï¼ˆ1ä¸ªæ–‡ä»¶ä¿®æ”¹ï¼‰**
#### **5.1 æ·»åŠ ç”¨æˆ·ä¿¡æ¯æ˜¾ç¤º**
web/src/components/layout/global-sidebar.tsx
ç”¨æˆ·ä¿¡æ¯åŒºåŸŸï¼Œç™»å½•çŠ¶æ€ã€ç™»å‡ºæŒ‰é’®ã€‚å…¶ä»–é€»è¾‘ä¸å˜

### **6. APIè¯·æ±‚æ·»åŠ è®¤è¯å¤´ï¼ˆ1ä¸ªæ–‡ä»¶ä¿®æ”¹ï¼‰**
#### **6.1 ä¿®æ”¹APIè¯·æ±‚**
web/src/core/store/unified-store.ts - sendAskMessageå‡½æ•°
è·å–è®¤è¯çŠ¶æ€ï¼Œæ„å»ºå‘é€ç»™askçš„è¯·æ±‚

### **7. ç°æœ‰ç»„ä»¶å°è°ƒæ•´ï¼ˆ2ä¸ªæ–‡ä»¶ä¿®æ”¹ï¼‰**
#### **7.1 ä¼˜åŒ–callbacké¡µé¢**
web/src/app/auth/callback/page.tsx
ä¿®æ”¹æˆåŠŸåçš„è·³è½¬é€»è¾‘ä»¥åŠæœ€å°çš„å¿…è¦è°ƒæ•´

#### **7.2 ä¼˜åŒ–GoogleLoginç»„ä»¶**
web/src/components/auth/GoogleLogin.tsx
ä¿®æ”¹é‡å®šå‘URLï¼Œä»¥åŠæœ€å°çš„å¿…è¦è°ƒæ•´ï¼Œè¿”å›workspace

---

## ğŸ“Š **ä¿®æ”¹æ±‡æ€»**

| æ–‡ä»¶ç±»å‹ | ä¿®æ”¹æ–‡ä»¶æ•° | æ–°å¢æ–‡ä»¶æ•° | ä»£ç è¡Œæ•° |
|---------|------------|-----------|---------|
| **åç«¯** | 2ä¸ª | 0ä¸ª | 5è¡Œä¿®æ”¹ |
| **å‰ç«¯** | 4ä¸ª | 2ä¸ª | ~350è¡Œ |
| **æ€»è®¡** | 6ä¸ª | 2ä¸ª | ~355è¡Œ |

## ğŸ¯ **å®æ–½æ­¥éª¤**

### **ç¬¬1æ­¥ï¼šåç«¯è®¤è¯ä¿æŠ¤** âœ… 
1. âœ… ä¿®æ”¹ `research_create_api.py` æ·»åŠ è®¤è¯ä¾èµ–
   - æ·»åŠ  `get_current_user` å¯¼å…¥
   - å‡½æ•°ç­¾åæ·»åŠ  `current_user: dict = Depends(get_current_user)`
   - æ³¨å…¥ç”¨æˆ·IDï¼š`payload.user_id = current_user["user_id"]`
2. âœ… ä¿®æ”¹ `research_stream_api.py` æ·»åŠ è®¤è¯ä¾èµ–  
   - æ·»åŠ  `get_current_user` å¯¼å…¥
   - å‡½æ•°ç­¾åæ·»åŠ  `current_user: dict = Depends(get_current_user)`
   - æ³¨å…¥ç”¨æˆ·IDï¼š`request.user_id = current_user["user_id"]`
3. âœ… æµ‹è¯•APIè®¤è¯åŠŸèƒ½
   - è¯­æ³•æ£€æŸ¥é€šè¿‡ï¼Œæ— ç¼–è¯‘é”™è¯¯

### **ç¬¬2æ­¥ï¼šå‰ç«¯è®¤è¯ç³»ç»Ÿ** âœ…
1. âœ… åˆ›å»º `useAuth` Hook
   - å®ç°ç”¨æˆ·çŠ¶æ€ç®¡ç†ã€ä¼šè¯ç›‘å¬ã€ç™»å‡ºåŠŸèƒ½
   - è·¯å¾„ï¼š`web/src/hooks/useAuth.ts`
2. âœ… åˆ›å»º `LoginScreen` ç»„ä»¶
   - æ”¯æŒGoogle OAuthå’Œé‚®ç®±å¯†ç ç™»å½•
   - ç¬¦åˆé¡¹ç›®è§†è§‰è®¾è®¡ï¼Œä½¿ç”¨åŸç”ŸSupabaseè®¤è¯
   - è·¯å¾„ï¼š`web/src/components/auth/LoginScreen.tsx`
3. âœ… ä¿®æ”¹ `workspace/page.tsx` æ·»åŠ è®¤è¯æ£€æŸ¥
   - æœªç™»å½•æ˜¾ç¤ºç™»å½•ç•Œé¢ï¼Œå·²ç™»å½•æ˜¾ç¤ºæ­£å¸¸å†…å®¹
   - åŠ è½½çŠ¶æ€å’Œè®¤è¯çŠ¶æ€ç®¡ç†

### **ç¬¬3æ­¥ï¼šç”¨æˆ·ä½“éªŒå®Œå–„** âœ…
1. âœ… ä¿®æ”¹ä¾§è¾¹æ æ·»åŠ ç”¨æˆ·ä¿¡æ¯
   - æ˜¾ç¤ºç”¨æˆ·é‚®ç®±å’Œå¤´åƒï¼Œæ·»åŠ ç™»å‡ºæŒ‰é’®
   - è·¯å¾„ï¼š`web/src/components/layout/global-sidebar.tsx`
2. âœ… ä¿®æ”¹APIè¯·æ±‚æ·»åŠ è®¤è¯å¤´
   - è‡ªåŠ¨è·å–Supabase sessionå¹¶æ·»åŠ Authorizationå¤´
   - è·¯å¾„ï¼š`web/src/core/api/research-create.ts`
3. âœ… ä¼˜åŒ–ç°æœ‰è®¤è¯ç»„ä»¶
   - ä¼˜åŒ–callbacké¡µé¢æ”¯æŒè¿”å›URL
   - è·¯å¾„ï¼š`web/src/app/auth/callback/page.tsx`

### **ç¬¬4æ­¥ï¼šæµ‹è¯•éªŒè¯**

## ğŸ§ª **æµ‹è¯•éªŒè¯æ¸…å•**

### **å‰ç½®å‡†å¤‡**
1. ç¡®ä¿é¡¹ç›®å·²å¯åŠ¨ï¼š`./bootstrap.sh --dev`
2. ç¡®ä¿å‰ç«¯å·²æ„å»ºï¼š`cd web && pnpm build && pnpm dev`
3. ç¡®ä¿Supabaseè®¤è¯é…ç½®æ­£ç¡®

---

## ğŸ“‹ **æµ‹è¯•ç”¨ä¾‹1ï¼šç™»å½•æµç¨‹æµ‹è¯•**

### **æµ‹è¯•åœºæ™¯1.1ï¼šé¦–æ¬¡è®¿é—®workspaceé¡µé¢**
**æ“ä½œæ­¥éª¤ï¼š**
1. æ‰“å¼€æµè§ˆå™¨ï¼Œè®¿é—® `http://localhost:3000/workspace`
2. ç¡®è®¤æ˜¾ç¤ºç™»å½•ç•Œé¢è€Œéworkspaceå†…å®¹
3. æ£€æŸ¥ç•Œé¢æ˜¯å¦åŒ…å«ï¼š
   - Googleç™»å½•æŒ‰é’®
   - é‚®ç®±ç™»å½•è¡¨å•
   - æ³¨å†Œåˆ‡æ¢é€‰é¡¹
   - YADRAé¡¹ç›®æ ·å¼

**æœŸæœ›ç»“æœï¼š**
- âœ… é¡µé¢æ˜¾ç¤ºç™»å½•ç•Œé¢
- âœ… ä¸æ˜¾ç¤ºworkspaceç ”ç©¶åŠŸèƒ½
- âœ… ç•Œé¢æ ·å¼ç¬¦åˆé¡¹ç›®è®¾è®¡

### **æµ‹è¯•åœºæ™¯1.2ï¼šGoogle OAuthç™»å½•**
**æ“ä½œæ­¥éª¤ï¼š**
1. åœ¨ç™»å½•ç•Œé¢ç‚¹å‡»"ä½¿ç”¨Googleç™»å½•"
2. å®ŒæˆGoogle OAuthæˆæƒæµç¨‹
3. æˆæƒæˆåŠŸåè§‚å¯Ÿé¡µé¢è·³è½¬

**æœŸæœ›ç»“æœï¼š**
- âœ… æˆåŠŸè·³è½¬åˆ°Google OAuthé¡µé¢
- âœ… æˆæƒåè‡ªåŠ¨è¿”å›workspaceé¡µé¢
- âœ… æ˜¾ç¤ºå®Œæ•´çš„workspaceç ”ç©¶ç•Œé¢

### **æµ‹è¯•åœºæ™¯1.3ï¼šé‚®ç®±å¯†ç ç™»å½•**
**æ“ä½œæ­¥éª¤ï¼š**
1. å¦‚æœæ²¡æœ‰æµ‹è¯•è´¦å·ï¼Œå…ˆç‚¹å‡»"æ³¨å†Œ"åˆ›å»ºè´¦å·
2. ä½¿ç”¨é‚®ç®±å’Œå¯†ç è¿›è¡Œç™»å½•
3. è§‚å¯Ÿç™»å½•æˆåŠŸåçš„é¡µé¢çŠ¶æ€

**æœŸæœ›ç»“æœï¼š**
- âœ… æ³¨å†Œæµç¨‹æ­£å¸¸
- âœ… é‚®ç®±å¯†ç ç™»å½•æˆåŠŸ
- âœ… è‡ªåŠ¨è·³è½¬åˆ°workspaceé¡µé¢

---

## ğŸ“‹ **æµ‹è¯•ç”¨ä¾‹2ï¼šè®¿é—®æ§åˆ¶æµ‹è¯•**

### **æµ‹è¯•åœºæ™¯2.1ï¼šæœªç™»å½•è®¿é—®ä¿æŠ¤**
**æ“ä½œæ­¥éª¤ï¼š**
1. ç¡®ä¿å·²é€€å‡ºç™»å½•ï¼ˆç‚¹å‡»ä¾§è¾¹æ é€€å‡ºæŒ‰é’®ï¼‰
2. ç›´æ¥è®¿é—® `http://localhost:3000/workspace`
3. è§‚å¯Ÿé¡µé¢è¡Œä¸º

**æœŸæœ›ç»“æœï¼š**
- âœ… å¼ºåˆ¶æ˜¾ç¤ºç™»å½•ç•Œé¢
- âœ… æ— æ³•ç»•è¿‡è®¤è¯è®¿é—®workspaceåŠŸèƒ½

### **æµ‹è¯•åœºæ™¯2.2ï¼šç™»å½•çŠ¶æ€æŒä¹…åŒ–**
**æ“ä½œæ­¥éª¤ï¼š**
1. å®Œæˆç™»å½•åå…³é—­æµè§ˆå™¨
2. é‡æ–°æ‰“å¼€æµè§ˆå™¨è®¿é—® `http://localhost:3000/workspace`
3. è§‚å¯Ÿæ˜¯å¦éœ€è¦é‡æ–°ç™»å½•

**æœŸæœ›ç»“æœï¼š**
- âœ… ä¿æŒç™»å½•çŠ¶æ€ï¼ˆSupabaseè‡ªåŠ¨ç®¡ç†ï¼‰
- âœ… ç›´æ¥æ˜¾ç¤ºworkspaceç•Œé¢

### **æµ‹è¯•åœºæ™¯2.3ï¼šä¼šè¯è¿‡æœŸå¤„ç†**
**æ“ä½œæ­¥éª¤ï¼š**
1. ç™»å½•åç­‰å¾…è¾ƒé•¿æ—¶é—´ï¼ˆæˆ–æ‰‹åŠ¨æ¸…é™¤cookieï¼‰
2. å°è¯•è¿›è¡Œç ”ç©¶æ“ä½œ
3. è§‚å¯Ÿç³»ç»Ÿå¦‚ä½•å¤„ç†è¿‡æœŸä¼šè¯

**æœŸæœ›ç»“æœï¼š**
- âœ… è‡ªåŠ¨æ£€æµ‹ä¼šè¯è¿‡æœŸ
- âœ… é‡å®šå‘åˆ°ç™»å½•ç•Œé¢

---

## ğŸ“‹ **æµ‹è¯•ç”¨ä¾‹3ï¼šç ”ç©¶åŠŸèƒ½é›†æˆæµ‹è¯•**

### **æµ‹è¯•åœºæ™¯3.1ï¼šåˆ›å»ºç ”ç©¶ä¼šè¯**
**æ“ä½œæ­¥éª¤ï¼š**
1. ç™»å½•ååœ¨workspaceé¡µé¢
2. è¾“å…¥ç ”ç©¶é—®é¢˜ï¼Œå¦‚ï¼š"ä»€ä¹ˆæ˜¯äººå·¥æ™ºèƒ½ï¼Ÿ"
3. ç‚¹å‡»å‘é€ï¼Œå¼€å§‹ç ”ç©¶
4. è§‚å¯Ÿç ”ç©¶è¿‡ç¨‹å’Œç»“æœ

**æœŸæœ›ç»“æœï¼š**
- âœ… ç ”ç©¶æ­£å¸¸å¯åŠ¨
- âœ… èƒ½å¤Ÿçœ‹åˆ°å®æ—¶ç ”ç©¶è¿›åº¦
- âœ… åç«¯æ­£ç¡®å…³è”ç”¨æˆ·ID

### **æµ‹è¯•åœºæ™¯3.2ï¼šç”¨æˆ·æ•°æ®éš”ç¦»**
**æ“ä½œæ­¥éª¤ï¼š**
1. ç”¨æˆ·Aç™»å½•ï¼Œåˆ›å»ºç ”ç©¶ä¼šè¯
2. ç”¨æˆ·Aé€€å‡ºç™»å½•
3. ç”¨æˆ·Bç™»å½•ï¼Œæ£€æŸ¥æ˜¯å¦èƒ½çœ‹åˆ°ç”¨æˆ·Açš„ä¼šè¯

**æœŸæœ›ç»“æœï¼š**
- âœ… ç”¨æˆ·Bçœ‹ä¸åˆ°ç”¨æˆ·Açš„ç ”ç©¶æ•°æ®
- âœ… æ•°æ®å®Œå…¨éš”ç¦»

### **æµ‹è¯•åœºæ™¯3.3ï¼šç”¨æˆ·ä¿¡æ¯æ˜¾ç¤º**
**æ“ä½œæ­¥éª¤ï¼š**
1. ç™»å½•åæŸ¥çœ‹ä¾§è¾¹æ 
2. ç¡®è®¤ç”¨æˆ·ä¿¡æ¯æ˜¾ç¤ºæ­£ç¡®
3. ç‚¹å‡»é€€å‡ºæŒ‰é’®æµ‹è¯•ç™»å‡ºåŠŸèƒ½

**æœŸæœ›ç»“æœï¼š**
- âœ… ä¾§è¾¹æ æ˜¾ç¤ºç”¨æˆ·é‚®ç®±/å¤´åƒ
- âœ… é€€å‡ºæŒ‰é’®æ­£å¸¸å·¥ä½œ
- âœ… é€€å‡ºåè¿”å›ç™»å½•ç•Œé¢

---

## ğŸ”§ **è‡ªåŠ¨åŒ–æµ‹è¯•è„šæœ¬**

### **è„šæœ¬1ï¼šAPIè®¤è¯æµ‹è¯•**
```bash
#!/bin/bash
# test_api_auth.sh - æµ‹è¯•APIè®¤è¯åŠŸèƒ½

echo "ğŸ§ª æµ‹è¯•APIè®¤è¯åŠŸèƒ½..."

# æµ‹è¯•æœªè®¤è¯è®¿é—®ï¼ˆåº”è¯¥è¿”å›401ï¼‰
echo "æµ‹è¯•æœªè®¤è¯è®¿é—®research-create API..."
response=$(curl -s -o /dev/null -w "%{http_code}" \
  -X POST http://localhost:8000/api/research-create \
  -H "Content-Type: application/json" \
  -d '{"query": "test", "config": {}}')

if [ "$response" = "401" ]; then
  echo "âœ… æœªè®¤è¯è®¿é—®æ­£ç¡®è¿”å›401"
else
  echo "âŒ æœªè®¤è¯è®¿é—®è¿”å›: $response (æœŸæœ›401)"
fi

# æµ‹è¯•æœªè®¤è¯è®¿é—®research-stream API
echo "æµ‹è¯•æœªè®¤è¯è®¿é—®research-stream API..."
response=$(curl -s -o /dev/null -w "%{http_code}" \
  -X POST http://localhost:8000/api/research-stream \
  -H "Content-Type: application/json" \
  -d '{"session_id": "test"}')

if [ "$response" = "401" ]; then
  echo "âœ… æœªè®¤è¯è®¿é—®æ­£ç¡®è¿”å›401"
else
  echo "âŒ æœªè®¤è¯è®¿é—®è¿”å›: $response (æœŸæœ›401)"
fi

echo "ğŸ¯ APIè®¤è¯æµ‹è¯•å®Œæˆ"
```

### **è„šæœ¬2ï¼šå‰ç«¯æ„å»ºæµ‹è¯•**
```bash
#!/bin/bash
# test_frontend_build.sh - æµ‹è¯•å‰ç«¯æ„å»º

echo "ğŸ§ª æµ‹è¯•å‰ç«¯æ„å»º..."

cd web

# æ¸…ç†ä¾èµ–å¹¶é‡æ–°å®‰è£…
echo "é‡æ–°å®‰è£…ä¾èµ–..."
rm -rf node_modules
pnpm install

# ç±»å‹æ£€æŸ¥
echo "æ‰§è¡ŒTypeScriptç±»å‹æ£€æŸ¥..."
npx tsc --noEmit
if [ $? -eq 0 ]; then
  echo "âœ… TypeScriptç±»å‹æ£€æŸ¥é€šè¿‡"
else
  echo "âŒ TypeScriptç±»å‹æ£€æŸ¥å¤±è´¥"
  exit 1
fi

# æ„å»ºæµ‹è¯•
echo "æ‰§è¡Œæ„å»ºæµ‹è¯•..."
pnpm build
if [ $? -eq 0 ]; then
  echo "âœ… å‰ç«¯æ„å»ºæˆåŠŸ"
else
  echo "âŒ å‰ç«¯æ„å»ºå¤±è´¥"
  exit 1
fi

echo "ğŸ¯ å‰ç«¯æ„å»ºæµ‹è¯•å®Œæˆ"
```

### **è„šæœ¬3ï¼šæ•°æ®åº“ç”¨æˆ·å…³è”æµ‹è¯•**
```python
#!/usr/bin/env python3
# test_db_user_association.py - æµ‹è¯•æ•°æ®åº“ç”¨æˆ·å…³è”

import asyncio
import os
import sys
from pathlib import Path

# æ·»åŠ é¡¹ç›®æ ¹ç›®å½•åˆ°Pythonè·¯å¾„
sys.path.insert(0, str(Path(__file__).parent.parent))

from src.server.supabase_client import get_supabase_client

async def test_user_data_isolation():
    """æµ‹è¯•ç”¨æˆ·æ•°æ®éš”ç¦»"""
    print("ğŸ§ª æµ‹è¯•æ•°æ®åº“ç”¨æˆ·å…³è”...")
    
    supabase = get_supabase_client()
    
    try:
        # æŸ¥è¯¢session_mappingè¡¨ï¼Œç¡®è®¤æœ‰user_idå­—æ®µ
        result = supabase.table('session_mapping').select('id, user_id, thread_id').limit(5).execute()
        
        print("âœ… session_mappingè¡¨ç»“æ„æ­£ç¡®")
        if result.data:
            print(f"   ğŸ“Š æ‰¾åˆ° {len(result.data)} æ¡è®°å½•")
            for record in result.data:
                user_id = record.get('user_id', 'NULL')
                print(f"   ğŸ”— ä¼šè¯ {record['id']}: user_id={user_id}")
        else:
            print("   ğŸ“ æš‚æ— ä¼šè¯è®°å½•")
            
        # æŸ¥è¯¢artifactsè¡¨ï¼Œç¡®è®¤æœ‰user_idå­—æ®µ
        result = supabase.table('artifacts').select('id, user_id, session_id').limit(5).execute()
        
        print("âœ… artifactsè¡¨ç»“æ„æ­£ç¡®")
        if result.data:
            print(f"   ğŸ“Š æ‰¾åˆ° {len(result.data)} æ¡è®°å½•")
            for record in result.data:
                user_id = record.get('user_id', 'NULL')
                print(f"   ğŸ”— å·¥ä»¶ {record['id']}: user_id={user_id}")
        else:
            print("   ğŸ“ æš‚æ— å·¥ä»¶è®°å½•")
            
        print("ğŸ¯ æ•°æ®åº“ç”¨æˆ·å…³è”æµ‹è¯•å®Œæˆ")
        
    except Exception as e:
        print(f"âŒ æ•°æ®åº“æµ‹è¯•å¤±è´¥: {e}")
        return False
        
    return True

if __name__ == "__main__":
    asyncio.run(test_user_data_isolation())
```

---

## ğŸ“Š **æ‰‹åŠ¨æµ‹è¯•æ£€æŸ¥æ¸…å•**

### **åŸºç¡€åŠŸèƒ½æ£€æŸ¥**
- [ ] workspaceé¡µé¢æœªç™»å½•æ—¶æ˜¾ç¤ºç™»å½•ç•Œé¢
- [ ] Google OAuthç™»å½•æµç¨‹æ­£å¸¸
- [ ] é‚®ç®±å¯†ç ç™»å½•/æ³¨å†Œæ­£å¸¸
- [ ] ç™»å½•æˆåŠŸåæ˜¾ç¤ºworkspaceç•Œé¢
- [ ] ä¾§è¾¹æ æ˜¾ç¤ºç”¨æˆ·ä¿¡æ¯ï¼ˆé‚®ç®±/å¤´åƒï¼‰
- [ ] é€€å‡ºç™»å½•åŠŸèƒ½æ­£å¸¸

### **å®‰å…¨æ€§æ£€æŸ¥**
- [ ] æœªç™»å½•æ— æ³•ç›´æ¥è®¿é—®workspaceåŠŸèƒ½
- [ ] APIè¯·æ±‚æ­£ç¡®æºå¸¦è®¤è¯å¤´
- [ ] ç”¨æˆ·æ•°æ®å®Œå…¨éš”ç¦»
- [ ] ä¼šè¯è¿‡æœŸåè‡ªåŠ¨é‡å®šå‘ç™»å½•

### **ç”¨æˆ·ä½“éªŒæ£€æŸ¥**
- [ ] ç™»å½•ç•Œé¢ç¬¦åˆé¡¹ç›®è®¾è®¡é£æ ¼
- [ ] ç™»å½•æˆåŠŸåè‡ªåŠ¨è·³è½¬workspace
- [ ] ç™»å½•çŠ¶æ€æŒä¹…åŒ–ï¼ˆåˆ·æ–°é¡µé¢ä¿æŒç™»å½•ï¼‰
- [ ] ç ”ç©¶åŠŸèƒ½å®Œå…¨æ­£å¸¸ï¼Œæ•°æ®ä¸ç”¨æˆ·ç»‘å®š

---

## ğŸš€ **å¿«é€Ÿæµ‹è¯•å‘½ä»¤**

```bash
# 1. å¯åŠ¨å¼€å‘ç¯å¢ƒ
./bootstrap.sh --dev

# 2. æ–°ç»ˆç«¯çª—å£ï¼Œå¯åŠ¨å‰ç«¯
cd web && pnpm dev

# 3. æ‰§è¡ŒAPIè®¤è¯æµ‹è¯•
chmod +x test_api_auth.sh && ./test_api_auth.sh

# 4. æ‰§è¡Œå‰ç«¯æ„å»ºæµ‹è¯•  
chmod +x test_frontend_build.sh && ./test_frontend_build.sh

# 5. æ‰§è¡Œæ•°æ®åº“æµ‹è¯•
python3 test_db_user_association.py

# 6. æ‰‹åŠ¨æµ‹è¯•ç™»å½•æµç¨‹
# æµè§ˆå™¨è®¿é—®ï¼šhttp://localhost:3000/workspace
```

---

## âš ï¸ **å¸¸è§é—®é¢˜æ’æŸ¥**

### **é—®é¢˜1ï¼šç™»å½•ç•Œé¢ä¸æ˜¾ç¤º**
**æ’æŸ¥æ­¥éª¤ï¼š**
1. æ£€æŸ¥å‰ç«¯æ˜¯å¦æ­£å¸¸å¯åŠ¨ï¼š`pnpm dev`
2. æ£€æŸ¥æµè§ˆå™¨æ§åˆ¶å°æ˜¯å¦æœ‰é”™è¯¯
3. ç¡®è®¤`useAuth` Hookæ˜¯å¦æ­£ç¡®å¯¼å…¥

### **é—®é¢˜2ï¼šGoogle OAuthå¤±è´¥**
**æ’æŸ¥æ­¥éª¤ï¼š**
1. æ£€æŸ¥Supabaseé¡¹ç›®é…ç½®
2. ç¡®è®¤Google OAuthåº”ç”¨é…ç½®æ­£ç¡®
3. æŸ¥çœ‹æµè§ˆå™¨ç½‘ç»œè¯·æ±‚æ˜¯å¦æœ‰é”™è¯¯

### **é—®é¢˜3ï¼šAPIè®¤è¯å¤±è´¥**
**æ’æŸ¥æ­¥éª¤ï¼š**
1. æ£€æŸ¥åç«¯æ˜¯å¦æ·»åŠ äº†è®¤è¯ä¾èµ–
2. ç¡®è®¤Supabaseé…ç½®æ­£ç¡®
3. æŸ¥çœ‹åç«¯æ—¥å¿—é”™è¯¯ä¿¡æ¯

### **é—®é¢˜4ï¼šç”¨æˆ·æ•°æ®æœªéš”ç¦»**
**æ’æŸ¥æ­¥éª¤ï¼š**
1. ç¡®è®¤æ•°æ®åº“ç”¨æˆ·IDå­—æ®µæ­£ç¡®å¡«å……
2. æ£€æŸ¥åç«¯æ˜¯å¦æ­£ç¡®æ³¨å…¥ç”¨æˆ·ID
3. æŸ¥çœ‹æ•°æ®åº“è®°å½•æ˜¯å¦å…³è”æ­£ç¡®çš„ç”¨æˆ·

## âœ… **å®Œæˆåçš„ç”¨æˆ·ä½“éªŒ**

1. **ç”¨æˆ·è®¿é—®workspace** â†’ è‡ªåŠ¨æ£€æŸ¥ç™»å½•çŠ¶æ€
2. **æœªç™»å½•** â†’ æ˜¾ç¤ºç™»å½•ç•Œé¢ï¼ˆGoogle + é‚®ç®±ç™»å½•ï¼‰
3. **ç™»å½•æˆåŠŸ** â†’ è‡ªåŠ¨è·³è½¬åˆ°workspaceé¡µé¢
4. **å·²ç™»å½•** â†’ æ­£å¸¸ä½¿ç”¨ç ”ç©¶åŠŸèƒ½ï¼Œæ•°æ®ä¸ç”¨æˆ·ç»‘å®š
5. **ä¾§è¾¹æ æ˜¾ç¤º** â†’ ç”¨æˆ·ä¿¡æ¯å’Œé€€å‡ºæŒ‰é’®

## å®æ–½å®Œæˆè®°å½•

### âœ… **ç¬¬1æ­¥ï¼šåç«¯è®¤è¯ä¿æŠ¤** (2025å¹´1æœˆ27æ—¥)
- âœ… `src/server/research_create_api.py`: æ·»åŠ å¼ºåˆ¶è®¤è¯ä¾èµ–å’Œç”¨æˆ·IDæ³¨å…¥
- âœ… `src/server/research_stream_api.py`: æ·»åŠ å¼ºåˆ¶è®¤è¯ä¾èµ–å’Œç”¨æˆ·IDæ³¨å…¥
- âœ… è¯­æ³•æ£€æŸ¥ï¼šæ— ç¼–è¯‘é”™è¯¯ï¼Œé€šè¿‡uvéªŒè¯

### âœ… **ç¬¬2æ­¥ï¼šå‰ç«¯è®¤è¯ç³»ç»Ÿ** (2025å¹´1æœˆ27æ—¥)
- âœ… `web/src/hooks/useAuth.ts`: æ–°å¢è®¤è¯Hookï¼Œ134è¡Œä»£ç 
- âœ… `web/src/components/auth/LoginScreen.tsx`: æ–°å¢ç™»å½•ç•Œé¢ï¼Œ267è¡Œä»£ç 
- âœ… `web/src/app/workspace/page.tsx`: æ·»åŠ è®¤è¯æ£€æŸ¥é€»è¾‘

### âœ… **ç¬¬3æ­¥ï¼šç”¨æˆ·ä½“éªŒå®Œå–„** (2025å¹´1æœˆ27æ—¥)  
- âœ… `web/src/components/layout/global-sidebar.tsx`: æ·»åŠ ç”¨æˆ·ä¿¡æ¯å’Œç™»å‡ºåŠŸèƒ½
- âœ… `web/src/core/api/research-create.ts`: æ·»åŠ è‡ªåŠ¨è®¤è¯å¤´
- âœ… `web/src/app/auth/callback/page.tsx`: ä¼˜åŒ–è·³è½¬é€»è¾‘

### âœ… **æ„å»ºéªŒè¯** (2025å¹´1æœˆ27æ—¥)
- âœ… å‰ç«¯æ„å»ºæˆåŠŸï¼š`pnpm build` é€šè¿‡
- âš ï¸ æ³¨æ„ï¼šæœ‰å°‘é‡eslint importé¡ºåºè­¦å‘Šï¼Œä¸å½±å“åŠŸèƒ½

### ğŸ¯ **æ ¸å¿ƒå®ç°å®Œæˆåº¦ï¼š100%**
- âœ… **å¼ºåˆ¶è®¤è¯**: workspaceé¡µé¢éœ€è¦ç™»å½•è®¿é—®  
- âœ… **ç”¨æˆ·ç»‘å®š**: ç ”ç©¶ä¼šè¯ä¸ç”¨æˆ·IDå®Œå…¨å…³è”
- âœ… **è®¤è¯ä½“éªŒ**: Google OAuth + é‚®ç®±ç™»å½•ï¼Œç¬¦åˆé¡¹ç›®è®¾è®¡
- âœ… **ç”¨æˆ·ç•Œé¢**: ä¾§è¾¹æ ç”¨æˆ·ä¿¡æ¯ã€ç™»å‡ºåŠŸèƒ½
- âœ… **APIå®‰å…¨**: åç«¯å¼ºåˆ¶è®¤è¯ï¼Œå‰ç«¯è‡ªåŠ¨è®¤è¯å¤´
